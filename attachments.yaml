name: Attachment
description: 'Add attachments'
endpoints:
  upload:
    POST:
      description: Upload attachment
      file: scripts/AttachmentUpload.js
        parameters:
          file_name: 
            type: string
            description: The name of the file to be uploaded
          file_type:
            type: string
            description: The content type of the file
        response:
          mimetype: application/json
          examples:
            - exit_code: 200
              description: "Success"
              example:
                {
                  "file_url":"https://s3-eu-west-1.amazonaws.com/mondo-image-uploads/user_00009237hliZellUicKuG1/LcCu4ogv1xW28OCcvOTL-foo.png",
                  "upload_url":"https://mondo-image-uploads.s3.amazonaws.com/user_00009237hliZellUicKuG1/LcCu4ogv1xW28OCcvOTL-foo.png?AWSAccessKeyId=AKIAIR3IFH6UCTCXB5PQ\u0026Expires=1447353431\u0026Signature=k2QeDCCQQHaZeynzYKckejqXRGU%!D(MISSING)"
                }
            - exit_code: 400
              description: "Failure"
              example: 
                {
                  "reason": "Internal error!"
                }
  register:
    POST:
      description: Register attachment
      file: scripts/AttachmentRegister.js
        parameters:
          external_id: 
            type: string
            description: The id of the transaction to associate the attachment with.
          file_url: 
            type: string
            description: The URL of the uploaded attachment.
          file_type:
            type: string
            description: The content type of the file
        response:
          mimetype: application/json
          examples:
            - exit_code: 200
              description: "Success"
              example:
                {
                  "attachment": {
                    "id": "attach_00009238aOAIvVqfb9LrZh",
                    "user_id": "user_00009238aMBIIrS5Rdncq9",
                    "external_id": "tx_00008zIcpb1TB4yeIFXMzx",
                    "file_url": "https://s3-eu-west-1.amazonaws.com/mondo-image-uploads/user_00009237hliZellUicKuG1/LcCu4ogv1xW28OCcvOTL-foo.png",
                    "file_type": "image/png",
                    "created": "2015-11-12T18:37:02Z"
                  }
                }
            - exit_code: 400
              description: "Failure"
              example: 
                {
                  "reason": "Internal error!"
                }